{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_HeaderComp = _resolveComponent(\"HeaderComp\");\n  var _component_GraphicComp = _resolveComponent(\"GraphicComp\");\n  var _component_ActionComp = _resolveComponent(\"ActionComp\");\n  var _component_Resume = _resolveComponent(\"Resume\");\n  var _component_Movements = _resolveComponent(\"Movements\");\n  var _component_LayoutComp = _resolveComponent(\"LayoutComp\");\n  return _openBlock(), _createBlock(_component_LayoutComp, null, {\n    header: _withCtx(function () {\n      return [_createVNode(_component_HeaderComp)];\n    }),\n    resume: _withCtx(function () {\n      return [_createVNode(_component_Resume, {\n        label: $data.label,\n        amount: $data.amount,\n        totalAmount: $data.totalamount\n      }, {\n        graphic: _withCtx(function () {\n          return [_createVNode(_component_GraphicComp, {\n            amounts: $options.amounts\n          }, null, 8 /* PROPS */, [\"amounts\"])];\n        }),\n        action: _withCtx(function () {\n          return [_createVNode(_component_ActionComp, {\n            onCreate: $options.create\n          }, null, 8 /* PROPS */, [\"onCreate\"])];\n        }),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"label\", \"amount\", \"totalAmount\"])];\n    }),\n    movements: _withCtx(function () {\n      return [_createVNode(_component_Movements, {\n        movements: $data.movs,\n        onBorrar: $options.borrar\n      }, null, 8 /* PROPS */, [\"movements\", \"onBorrar\"])];\n    }),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_LayoutComp","header","_withCtx","_createVNode","_component_HeaderComp","resume","_component_Resume","label","$data","amount","totalAmount","totalamount","graphic","_component_GraphicComp","amounts","$options","action","_component_ActionComp","onCreate","create","_","movements","_component_Movements","movs","onBorrar","borrar"],"sources":["/home/wilker/Desktop/cashFlowVue/src/components/HomeComp.vue"],"sourcesContent":["<template>\n  <LayoutComp>\n    <!-- Header -->\n    <template #header>\n      <HeaderComp />\n    </template>\n\n    <!-- Index -->\n    <template #resume>\n      <Resume :label=\"label\" :amount=\"amount\" :totalAmount=\"totalamount\">\n        <template #graphic>\n          <GraphicComp :amounts=\"amounts\"></GraphicComp>\n        </template>\n        <template #action>\n          <ActionComp @create=\"create\"/>\n        </template>\n      </Resume>\n    </template>\n\n    <!-- List movements -->\n    <template #movements>\n      <Movements :movements=\"movs\" @borrar=\"borrar\"/>\n    </template>\n\n  </LayoutComp>\n</template>\n<script>\nimport HeaderComp from \"./HeaderComp.vue\";\nimport LayoutComp from \"./LayoutComp.vue\";\nimport Resume from \"./Resume/IndexComp.vue\";\nimport Movements from \"./Movements/IndexMov.vue\";\nimport ActionComp from \"./ActionComp.vue\";\nimport GraphicComp from \"./Resume/GraphicComp.vue\";\n\nexport default {\n  components: {\n    LayoutComp,\n    HeaderComp,\n    Resume,\n    Movements,\n    ActionComp,\n    GraphicComp\n},\n  data() {\n    return {\n      amount: null,\n      label: null,\n      totalamount: \"1000000\",\n      movs: []\n    };\n  },\n  computed : {\n    amounts() {\n      const lastDays = this.movs\n        .filter( m => {\n          const today = new Date();\n          const oldDate = today.setDate(today.getDate() - 30);\n\n          return m.time > oldDate\n        })\n        .map(m => m.amount)\n\n      return lastDays.map((m, i) => {\n        const lastMovements = lastDays.slice(0, i);\n\n        return lastMovements.reduce((suma, movement) => {\n          return suma + movement\n        }, 0);\n      }); \n    }\n  },\n  mounted() {\n    const movs = JSON.parse(localStorage.getItem(\"movs\"));\n    this.movs = movs.map(m => {\n       return {...m , time : new Date(m.time )};\n    });\n\n  },\n  methods: {\n    create(movement) {\n      this.movs.push(movement);\n      this.save()\n    },\n    borrar(id) {\n      const index = this.movs.findIndex( m => m.id == id);\n      this.movs.splice(index,1);\n      this.save()\n    },\n    save() {\n      localStorage.setItem(\"movs\", JSON.stringify(this.movs))\n    }\n  }\n}\n</script>"],"mappings":";;;;;;;;uBACEA,YAAA,CAuBaC,qBAAA;IArBAC,MAAM,EAAAC,QAAA,CACf;MAAA,OAAc,CAAdC,YAAA,CAAcC,qBAAA,E;;IAILC,MAAM,EAAAH,QAAA,CACf;MAAA,OAOS,CAPTC,YAAA,CAOSG,iBAAA;QAPAC,KAAK,EAAEC,KAAA,CAAAD,KAAK;QAAGE,MAAM,EAAED,KAAA,CAAAC,MAAM;QAAGC,WAAW,EAAEF,KAAA,CAAAG;;QACzCC,OAAO,EAAAV,QAAA,CAChB;UAAA,OAA8C,CAA9CC,YAAA,CAA8CU,sBAAA;YAAhCC,OAAO,EAAEC,QAAA,CAAAD;UAAO,qC;;QAErBE,MAAM,EAAAd,QAAA,CACf;UAAA,OAA8B,CAA9BC,YAAA,CAA8Bc,qBAAA;YAAjBC,QAAM,EAAEH,QAAA,CAAAI;UAAM,sC;;QAdrCC,CAAA;;;IAoBeC,SAAS,EAAAnB,QAAA,CAClB;MAAA,OAA+C,CAA/CC,YAAA,CAA+CmB,oBAAA;QAAnCD,SAAS,EAAEb,KAAA,CAAAe,IAAI;QAAGC,QAAM,EAAET,QAAA,CAAAU;;;IArB5CL,CAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}