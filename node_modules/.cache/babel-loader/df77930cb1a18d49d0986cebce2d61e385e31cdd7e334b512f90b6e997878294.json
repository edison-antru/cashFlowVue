{"ast":null,"code":"import _objectSpread from \"/home/wilker/Desktop/cashFlowVue/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport HeaderComp from \"./HeaderComp.vue\";\nimport LayoutComp from \"./LayoutComp.vue\";\nimport Resume from \"./Resume/IndexComp.vue\";\nimport Movements from \"./Movements/IndexMov.vue\";\nimport ActionComp from \"./ActionComp.vue\";\nimport GraphicComp from \"./Resume/GraphicComp.vue\";\nexport default {\n  components: {\n    LayoutComp: LayoutComp,\n    HeaderComp: HeaderComp,\n    Resume: Resume,\n    Movements: Movements,\n    ActionComp: ActionComp,\n    GraphicComp: GraphicComp\n  },\n  data: function data() {\n    return {\n      amount: null,\n      label: null,\n      totalamount: \"1000000\",\n      movs: []\n    };\n  },\n  computed: {\n    amounts: function amounts() {\n      var lastDays = this.movs.filter(function (m) {\n        var today = new Date();\n        var oldDate = today.setDate(today.getDate() - 30);\n        return m.time > oldDate;\n      }).map(function (m) {\n        return m.amount;\n      });\n      return lastDays.map(function (m, i) {\n        var lastMovements = lastDays.slice(0, i);\n        return lastMovements.reduce(function (suma, movement) {\n          return suma + movement;\n        }, 0);\n      });\n    },\n    totalAmount: function totalAmount() {\n      return this.movs.reduce(function (suma, m) {\n        return suma + m.amount;\n      }, 0);\n    }\n  },\n  mounted: function mounted() {\n    var movs = JSON.parse(localStorage.getItem(\"movs\"));\n    console.log(movs);\n    if (Array.isArray(movs)) {\n      this.movs = movs.map(function (m) {\n        return _objectSpread(_objectSpread({}, m), {}, {\n          time: new Date(m.time)\n        });\n      });\n    }\n  },\n  methods: {\n    create: function create(movs) {\n      this.movements.push(movs);\n      this.save();\n    },\n    remove: function remove(id) {\n      var index = this.movements.findIndex(function (m) {\n        return m.id === id;\n      });\n      this.movements.splice(index, 1);\n      this.save();\n    },\n    save: function save() {\n      localStorage.setItem(\"movements\", JSON.stringify(this.movements));\n    }\n  }\n};","map":{"version":3,"names":["HeaderComp","LayoutComp","Resume","Movements","ActionComp","GraphicComp","components","data","amount","label","totalamount","movs","computed","amounts","lastDays","filter","m","today","Date","oldDate","setDate","getDate","time","map","i","lastMovements","slice","reduce","suma","movement","totalAmount","mounted","JSON","parse","localStorage","getItem","console","log","Array","isArray","_objectSpread","methods","create","movements","push","save","remove","id","index","findIndex","splice","setItem","stringify"],"sources":["/home/wilker/Desktop/cashFlowVue/src/components/HomeComp.vue"],"sourcesContent":["<template>\n  <LayoutComp>\n    <!-- Header -->\n    <template #header>\n      <HeaderComp />\n    </template>\n\n    <!-- Index -->\n    <template #resume>\n      <Resume :label=\"label\" :amount=\"amount\" :totalAmount=\"totalamount\">\n        <template #graphic>\n          <GraphicComp :amounts=\"amounts\"></GraphicComp>\n        </template>\n        <template #action>\n          <ActionComp @create=\"create\"/>\n        </template>\n      </Resume>\n    </template>\n\n    <!-- List movements -->\n    <template #movements>\n      <Movements :movements=\"movs\" @borrar=\"borrar\"/>\n    </template>\n\n  </LayoutComp>\n</template>\n<script>\nimport HeaderComp from \"./HeaderComp.vue\";\nimport LayoutComp from \"./LayoutComp.vue\";\nimport Resume from \"./Resume/IndexComp.vue\";\nimport Movements from \"./Movements/IndexMov.vue\";\nimport ActionComp from \"./ActionComp.vue\";\nimport GraphicComp from \"./Resume/GraphicComp.vue\";\n\nexport default {\n  components: {\n    LayoutComp,\n    HeaderComp,\n    Resume,\n    Movements,\n    ActionComp,\n    GraphicComp\n},\n  data() {\n    return {\n      amount: null,\n      label: null,\n      totalamount: \"1000000\",\n      movs: [\n]\n    };\n  },\n  computed : {\n    amounts() {\n      const lastDays = this.movs\n        .filter( m => {\n          const today = new Date();\n          const oldDate = today.setDate(today.getDate() - 30);\n\n          return m.time > oldDate\n        })\n        .map(m => m.amount);\n\n      return lastDays.map((m, i) => {\n        const lastMovements = lastDays.slice(0, i);\n\n        return lastMovements.reduce((suma, movement) => {\n          return suma + movement\n        }, 0);\n\n      }); \n    },\n    totalAmount() {\n      return this.movs.reduce((suma, m) => {\n        return suma + m.amount;\n      }, 0);\n    }\n\n  },\n  mounted() {\n    const movs = JSON.parse(localStorage.getItem(\"movs\"));\n    console.log(movs);\n\n    if (Array.isArray(movs)) {\n      this.movs = movs.map(m => {\n        return { ...m, time: new Date(m.time) };\n      });\n    }\n  },\n  methods: {\n    create(movs) {\n      this.movements.push(movs);\n      this.save();\n    },\n    remove(id) {\n      const index = this.movements.findIndex(m => m.id === id);\n      this.movements.splice(index, 1);\n      this.save();\n    },\n    save() {\n      localStorage.setItem(\"movements\", JSON.stringify(this.movements));\n    }\n  }\n}\n</script>"],"mappings":";;;;;;;;;;;;;AA2BA,OAAOA,UAAS,MAAO,kBAAkB;AACzC,OAAOC,UAAS,MAAO,kBAAkB;AACzC,OAAOC,MAAK,MAAO,wBAAwB;AAC3C,OAAOC,SAAQ,MAAO,0BAA0B;AAChD,OAAOC,UAAS,MAAO,kBAAkB;AACzC,OAAOC,WAAU,MAAO,0BAA0B;AAElD,eAAe;EACbC,UAAU,EAAE;IACVL,UAAU,EAAVA,UAAU;IACVD,UAAU,EAAVA,UAAU;IACVE,MAAM,EAANA,MAAM;IACNC,SAAS,EAATA,SAAS;IACTC,UAAU,EAAVA,UAAU;IACVC,WAAU,EAAVA;EACJ,CAAC;EACCE,IAAI,WAAAA,KAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,IAAI;MACZC,KAAK,EAAE,IAAI;MACXC,WAAW,EAAE,SAAS;MACtBC,IAAI,EAAE;IAER,CAAC;EACH,CAAC;EACDC,QAAO,EAAI;IACTC,OAAO,WAAAA,QAAA,EAAG;MACR,IAAMC,QAAO,GAAI,IAAI,CAACH,IAAG,CACtBI,MAAM,CAAE,UAAAC,CAAA,EAAK;QACZ,IAAMC,KAAI,GAAI,IAAIC,IAAI,CAAC,CAAC;QACxB,IAAMC,OAAM,GAAIF,KAAK,CAACG,OAAO,CAACH,KAAK,CAACI,OAAO,CAAC,IAAI,EAAE,CAAC;QAEnD,OAAOL,CAAC,CAACM,IAAG,GAAIH,OAAM;MACxB,CAAC,EACAI,GAAG,CAAC,UAAAP,CAAA;QAAA,OAAKA,CAAC,CAACR,MAAM;MAAA,EAAC;MAErB,OAAOM,QAAQ,CAACS,GAAG,CAAC,UAACP,CAAC,EAAEQ,CAAC,EAAK;QAC5B,IAAMC,aAAY,GAAIX,QAAQ,CAACY,KAAK,CAAC,CAAC,EAAEF,CAAC,CAAC;QAE1C,OAAOC,aAAa,CAACE,MAAM,CAAC,UAACC,IAAI,EAAEC,QAAQ,EAAK;UAC9C,OAAOD,IAAG,GAAIC,QAAO;QACvB,CAAC,EAAE,CAAC,CAAC;MAEP,CAAC,CAAC;IACJ,CAAC;IACDC,WAAW,WAAAA,YAAA,EAAG;MACZ,OAAO,IAAI,CAACnB,IAAI,CAACgB,MAAM,CAAC,UAACC,IAAI,EAAEZ,CAAC,EAAK;QACnC,OAAOY,IAAG,GAAIZ,CAAC,CAACR,MAAM;MACxB,CAAC,EAAE,CAAC,CAAC;IACP;EAEF,CAAC;EACDuB,OAAO,WAAAA,QAAA,EAAG;IACR,IAAMpB,IAAG,GAAIqB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IACrDC,OAAO,CAACC,GAAG,CAAC1B,IAAI,CAAC;IAEjB,IAAI2B,KAAK,CAACC,OAAO,CAAC5B,IAAI,CAAC,EAAE;MACvB,IAAI,CAACA,IAAG,GAAIA,IAAI,CAACY,GAAG,CAAC,UAAAP,CAAA,EAAK;QACxB,OAAAwB,aAAA,CAAAA,aAAA,KAAYxB,CAAC;UAAEM,IAAI,EAAE,IAAIJ,IAAI,CAACF,CAAC,CAACM,IAAI;QAAA;MACtC,CAAC,CAAC;IACJ;EACF,CAAC;EACDmB,OAAO,EAAE;IACPC,MAAM,WAAAA,OAAC/B,IAAI,EAAE;MACX,IAAI,CAACgC,SAAS,CAACC,IAAI,CAACjC,IAAI,CAAC;MACzB,IAAI,CAACkC,IAAI,CAAC,CAAC;IACb,CAAC;IACDC,MAAM,WAAAA,OAACC,EAAE,EAAE;MACT,IAAMC,KAAI,GAAI,IAAI,CAACL,SAAS,CAACM,SAAS,CAAC,UAAAjC,CAAA;QAAA,OAAKA,CAAC,CAAC+B,EAAC,KAAMA,EAAE;MAAA,EAAC;MACxD,IAAI,CAACJ,SAAS,CAACO,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;MAC/B,IAAI,CAACH,IAAI,CAAC,CAAC;IACb,CAAC;IACDA,IAAI,WAAAA,KAAA,EAAG;MACLX,YAAY,CAACiB,OAAO,CAAC,WAAW,EAAEnB,IAAI,CAACoB,SAAS,CAAC,IAAI,CAACT,SAAS,CAAC,CAAC;IACnE;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}